var i18n={setLanguage:function(n,t,e){return i18n.language=e,i18n.defaultLang=t||"en",i18n.supported=n||["en"],this},init:function(n,t,e){n=n||"resources/",t=t||"locale_",e=e||".json";var i=function(n,t){var e=window.navigator.userLanguage||window.navigator.language;return e=e.length>2?e.split("-")[0]:e,n.indexOf(e)>-1?e:t},o=function(n,t){if(null==n)try{JSON.parse(t.responseText),r("Content is not defined")}catch(e){r("Failed to parse the content",e)}else i18n.strings=n,i18n.localize()},r=function(n){console.error("[I18N]:"+n)},a=pegasus(n+t+(i18n.language||i(i18n.supported,i18n.defaultLang))+e);a.then(o,r)},_jsonWalker:function(n,t){var e=t.split(".");return t=e.shift(),void 0==n||void 0==n[t]?(e.splice(0,0,t),"~~"+e.join(".")+"~~"):"object"==typeof n[t]?this._jsonWalker(n[t],e.join(".")):n[t]},localize:function(){if(!i18n.strings)throw"You must call the init method first";var n=function(n){function t(n){return("@"!==n[0]||"@"!==n[n.length-1])&&(/\s/.test(n)||n.indexOf("..")>-1||n.split(".").length<3)}return!n&&t(n)};Array.prototype.slice.call(document.getElementsByTagName("i18n")).map(function(t){n(t.textContent)||(t.textContent=i18n._jsonWalker(i18n.strings,t.textContent.trim()))}),Array.prototype.slice.call(document.getElementsByTagName("input")).map(function(n){n.placeholder.indexOf("|i18n")>-1&&(n.placeholder=i18n._jsonWalker(i18n.strings,n.placeholder.split("|")[0].trim()))}),Array.prototype.slice.call(document.getElementsByTagName("img")).map(function(n){n.alt.indexOf("|i18n")>-1&&(n.alt=i18n._jsonWalker(i18n.strings,n.alt.split("|")[0].trim()))})}};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});